<div id="wrapper" class="wrapper">

  <div class="welcome">
    <div class="welcomeMessage">
    <h1>Welcome to Dory</h1>
    <p>Leave the details to us and just keep swimming </p>
    <p>You have <a href="#divelist"><strong>{{ getNumberofDives() }}</strong></a> dives logged!</p>
    </div>
  </div>



  <div class="container" *ngIf="!selected">
    <h2 class="divelist" id = "divelist">Dive List</h2>
    <table>
      <thead>
        <tr>
         <th>Site Name</th>
        <th>Site Location</th>
        <th>Dive Date</th>
        <th>Visibility</th>
        <th>Dive Start</th>
        <th>Dive End</th>
        <th>Delete</th>
      </tr>
      </thead>
      <tbody class="scrolling-box">
        <tr *ngFor="let log of logs">
          <td (click)="displayLog(log)">{{ log.siteName }}</td>
          <td (click)="displayLog(log)">{{ log.siteLocation }}</td>
          <td>{{ log.date | date : "shortDate" }}</td>
          <td>{{ log.visibility }}</td>
          <td>{{ log.diveStart }}</td>
          <td>{{ log.diveEnd }}</td>
          <td>
            <button
              type="button"
              class="btn btn-info"
              (click)="deleteLog(log.id)"
            >
              X
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>



  <div class="container" *ngIf="selected">
    <table>
      <thead>
       <tr>
        <th>Site ID:</th>
      <th>Site Name</th>
     <th>Site Location</th>
     <th>Dive Date</th>
     <th>Visibility</th>
     <th>Dive Start</th>
     <th>Dive End</th>

   </tr>
  </thead>
  <tbody>
    <tr>
    <td>{{ selected.id }}</td>
    <td>{{ selected.siteName }}</td>
    <td>{{ selected.siteLocation }}</td>
    <td>{{ selected.date | date : "shortDate"}}</td>
    <td>{{ selected.visibility }}</td>
    <td>{{ selected.diveStart }}</td>
    <td>{{ selected.diveEnd }}</td><br>

  </tr>
  <button class="btn btn-primary" (click)="setEditDivingLog()">Edit</button>
  <button class="btn btn-primary" (click)="displayTable()">Back</button></tbody></table>
  </div>

  <!-- Edit Dive Form -->
  <div id="editDivingLog" *ngIf="editDivingLog">
    <form>
      <label class="form-label" for="siteName">Site Name:</label>
      <input
        type="text"
        name="editDivingLog.siteName"
        [(ngModel)]="editDivingLog.siteName"
      />
      <label class="form-label" for="siteLocation">Site Location:</label>
      <input
        type="text"
        name="editDivingLog.siteLocation"
        [(ngModel)]="editDivingLog.siteLocation"
      />
      <label class="form-label" for="date">Date:</label>
      <input
        type="date"
        name="editDivingLog.date"
        [(ngModel)]="editDivingLog.date"
      />
      <label class="form-label" for="visibility">Visibility:</label>
      <input
        type="text"
        name="editDivingLog.visibility"
        [(ngModel)]="editDivingLog.visibility"
      />
      <label class="form-label" for="diveStart">Dive Start:</label>
      <input
        type="time"
        name="editDivingLog.diveStart"
        [(ngModel)]="editDivingLog.diveStart"
      />
      <label class="form-label" for="diveEnd">Dive End:</label>
      <input
        type="time"
        name="editDivingLog.diveEnd"
        [(ngModel)]="editDivingLog.diveEnd"
      />
      <br />
      <button class="btn btn-success" (click)="updateDivingLog(editDivingLog)">
        Save
      </button>
      <button class="btn btn-danger" (click)="editDivingLog = null">
        Cancel
      </button>
    </form>
  </div>
  <br />
  <br />
  <!-- Add new dive form -->

  <h3 class="divelist">Add a new dive!</h3>
  <div name="newTask"  *ngIf="newDivingLog">

    <div class="row h-100 justify-content-center align-items-center">
    <div class="col px-md-40" id="form-wrapper" style="max-width: 750px; margin: 100px; float: left; border: 3px solid #0ab5be; padding: 40px; background-color:  rgba(77, 178, 187, 0.398)">

      <label class="form-label" for="siteName">Site Name:</label>
      <input type="text" name="newDivingLog.siteName" [(ngModel)]="newDivingLog.siteName"/>
      <label class="form-label" for="siteLocation">Site Location:</label>
      <input type="text" name="newDivingLog.siteLocation" [(ngModel)]="newDivingLog.siteLocation"/><br>
      <label class="form-label" for="date">Date:</label>
      <input type="date" name="newDivingLog.date"[(ngModel)]="newDivingLog.date"/>
      <label class="form-label" for="visibility">Visibility:</label>
      <input type="text" name="newDivingLog.visibility" [(ngModel)]="newDivingLog.visibility"/><br>
      <label class="form-label" for="diveStart">Dive Start:</label>
    <input
      type="time"
      name="newDivingLog.diveStart"
      [(ngModel)]="newDivingLog.diveStart"
    />
    <label class="form-label" for="diveEnd">Dive End:</label>
    <input
      type="time"
      name="newDivingLog.diveEnd"
      [(ngModel)]="newDivingLog.diveEnd"
    /><br />
    <button class="btn btn-primary" (click)="addLog(newDivingLog)">
      Add a dive!
    </button>
    </div>
  </div>
  </div>
